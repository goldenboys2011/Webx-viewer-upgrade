<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebX Viewer</title>
    <meta name="description" content="View WebX websites online using WXV.">
    <meta name="theme-color" content="#eebb22">
    <link rel="icon" href="./favicon.ico" type="image/png">
    <script src="https://cdn.jsdelivr.net/npm/wasmoon@1.16.0"></script>
    <link rel="canonical" href="https://inventionpro.github.io/Webx-viewer/">
    <link rel="stylesheet" href="./media/style.css">
    <link rel="manifest" href="./media/install.json">
    <meta name="robots" content="index, follow">
  </head>
  <body>
    <div class="nav">
      <input placeholder="url" id="url">
      <button onclick="view()">View</button>
      <span></span>
      <button onclick="toggleConsole()">Console</button>
      <dialog id="console">
        <button onclick="this.parentElement.close()" class="modal-close">x</button>
        <p style="margin:2px 0px;font-size:125%;">Console:</p>
        <div id="stdout"></div>
        <div class="in">
          <select id="ctx"></select>
          <textarea id="code" rows="1"></textarea>
          <button id="sned">Sned</button>
        </div>
      </dialog>
      <button onclick="toggleSettings()">Settings</button>
      <dialog id="settings">
        <button onclick="this.parentElement.close()" class="modal-close">x</button>
        <label class="notice-p">Bussinga: <input id="bussinga" type="checkbox"><div class="notice">This can be unsafe, <a href="https://github.com/inventionpro/bussinga-attack" target="_blank">check here</a>.</div></label>
        <br>
        <label>Proxy fetches: <input id="proxy" type="checkbox"></label>
        <br>
        <label>DNS: <input placeholder="dns server" value="https://dns.webxplus.org/" id="dns" style="width:200px"></label>
        <br>
        <button onclick="window.cache={domain:{},fetch:{}}">Remove cache</button>
        <button onclick="embed()">Embed link</button>
      </dialog>
      <script>
        function toggleConsole() {
          let s = document.getElementById('console');
          if (s.open) {
            s.close();
          } else {
            s.showModal();
          }
        }
        function toggleSettings() {
          let s = document.getElementById('settings');
          if (s.open) {
            s.close();
          } else {
            s.showModal();
          }
        }
        function embed() {
          navigator.clipboard.writeText(`https://golden.is-a.dev/Webx-viewer-upgrade/embed?url=${document.getElementById('url').value}&bussinga=${document.getElementById('bussinga').checked}&dns=${document.getElementById('dns').value}`);
        }
      </script>
    </div>
    <iframe sandbox="allow-modals allow-orientation-lock allow-pointer-lock allow-presentation allow-scripts allow-same-origin"></iframe>
    <script src="./media/script.js" type="module"></script>
  </body>
</html>